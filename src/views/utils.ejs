//<script>
const led_server_url = '<%= ledServerURL %>';

// Converts a hex code value to a list of RGB values
function hexToRgb(hex) {
  // BEGIN: hexToRgb
  const r = parseInt(hex.slice(1, 3), 16);
  const g = parseInt(hex.slice(3, 5), 16);
  const b = parseInt(hex.slice(5, 7), 16);
  return [r, g, b];
  // END: hexToRgb
}

// Converts a list of RGB values to their hex code equivalent
function rgbToHex(rgb) {
  // BEGIN: rgbToHex
  const r = rgb[0].toString(16).padStart(2, '0');
  const g = rgb[1].toString(16).padStart(2, '0');
  const b = rgb[2].toString(16).padStart(2, '0');
  return `#${r}${g}${b}`;
  // END: rgbToHex
}

// Save the current matrix to local storage
function saveMatrixLocal(gridElement) {
  const cells = gridElement.querySelectorAll('.cell');
  const pixelData = [];
  cells.forEach((cell) => {
    const colour = hexToRgb(cell.getAttribute('data-colour'));
    pixelData.push(colour);
  });

  console.log('Saving matrix to local storage...');
  localStorage.setItem('matrix', JSON.stringify(pixelData));
}

export { hexToRgb, rgbToHex, led_server_url, saveMatrixLocal };

//</script>
